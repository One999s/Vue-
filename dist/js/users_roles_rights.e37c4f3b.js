(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["users_roles_rights"],{"057f":function(e,t,r){var a=r("fc6a"),s=r("241c").f,i={}.toString,n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(e){try{return s(e)}catch(t){return n.slice()}};e.exports.f=function(e){return n&&"[object Window]"==i.call(e)?o(e):s(a(e))}},"0702":function(e,t,r){"use strict";var a=r("4019"),s=r.n(a);s.a},"0858":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("权限列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightsList,border:""}},[r("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),r("el-table-column",{attrs:{prop:"authName",label:"权限名称",align:"center"}}),r("el-table-column",{attrs:{prop:"path",label:"路径",align:"center"}}),r("el-table-column",{attrs:{prop:"level",label:"权限等级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.level?r("el-tag",[e._v("一级")]):"1"==t.row.level?r("el-tag",{attrs:{type:"success"}},[e._v("二级")]):r("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])})],1)],1)],1)},s=[],i=(r("96cf"),r("1da1")),n={data:function(){return{rightsList:[{authName:"",path:"",level:""}]}},created:function(){this.getRightsList()},methods:{getRightsList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rights/list");case 2:t=e.sent,r=t.data,this.rightsList=r.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},o=n,l=(r("ec8c"),r("2877")),c=Object(l["a"])(o,a,s,!1,null,"5ba8eb4a",null);t["default"]=c.exports},"25f0":function(e,t,r){"use strict";var a=r("6eeb"),s=r("825a"),i=r("d039"),n=r("ad6d"),o="toString",l=RegExp.prototype,c=l[o],u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=o;(u||d)&&a(RegExp.prototype,o,(function(){var e=s(this),t=String(e.source),r=e.flags,a=String(void 0===r&&e instanceof RegExp&&!("flags"in l)?n.call(e):r);return"/"+t+"/"+a}),{unsafe:!0})},"3ca3":function(e,t,r){"use strict";var a=r("6547").charAt,s=r("69f3"),i=r("7dd0"),n="String Iterator",o=s.set,l=s.getterFor(n);i(String,"String",(function(e){o(this,{type:n,string:String(e),index:0})}),(function(){var e,t=l(this),r=t.string,s=t.index;return s>=r.length?{value:void 0,done:!0}:(e=a(r,s),t.index+=e.length,{value:e,done:!1})}))},4019:function(e,t,r){},4322:function(e,t,r){},"4df4":function(e,t,r){"use strict";var a=r("0366"),s=r("7b0b"),i=r("9bdd"),n=r("e95a"),o=r("50c4"),l=r("8418"),c=r("35a1");e.exports=function(e){var t,r,u,d,f,m,p=s(e),b="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,v=void 0!==h,w=c(p),y=0;if(v&&(h=a(h,g>2?arguments[2]:void 0,2)),void 0==w||b==Array&&n(w))for(t=o(p.length),r=new b(t);t>y;y++)m=v?h(p[y],y):p[y],l(r,y,m);else for(d=w.call(p),f=d.next,r=new b;!(u=f.call(d)).done;y++)m=v?i(d,h,[u.value,y],!0):u.value,l(r,y,m);return r.length=y,r}},7027:function(e,t,r){},"746f":function(e,t,r){var a=r("428f"),s=r("5135"),i=r("e538"),n=r("9bf2").f;e.exports=function(e){var t=a.Symbol||(a.Symbol={});s(t,e)||n(t,e,{value:i.f(e)})}},"7d9c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{staticClass:"el-row",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入用户姓名",clearable:""},on:{clear:e.getUserList},model:{value:e.usersInfo.query,callback:function(t){e.$set(e.usersInfo,"query",t)},expression:"usersInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),r("el-col",{attrs:{span:6}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加用户")])],1),r("el-col",{attrs:{span:12}})],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,border:""}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"username",label:"姓名",width:"120px"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),r("el-table-column",{attrs:{prop:"mg_state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.switchChange(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"data.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"175px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.userEdit(t.row)}}})],1),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.userDelete(t.row)}}})],1),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.cancelRoleDialog(t.row)}}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.usersInfo.pagenum,"page-sizes":[2,6,8,10],"page-size":e.usersInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t},close:e.addDialogClose}},[r("div",{staticClass:"adduserClass"},[r("el-form",{ref:"addUserForm",attrs:{model:e.addUser,"label-width":"80px",rules:e.addrules}},[r("el-form-item",{attrs:{label:"用户名 :",prop:"username"}},[r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-user"},model:{value:e.addUser.username,callback:function(t){e.$set(e.addUser,"username",t)},expression:"addUser.username"}})],1),r("el-form-item",{attrs:{label:"密码 :",prop:"password"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{type:"password","prefix-icon":"el-icon-lock"},model:{value:e.addUser.password,callback:function(t){e.$set(e.addUser,"password",t)},expression:"addUser.password"}})],1),r("el-form-item",{attrs:{label:"邮箱 :",prop:"email"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-postcard"},model:{value:e.addUser.email,callback:function(t){e.$set(e.addUser,"email",t)},expression:"addUser.email"}})],1),r("el-form-item",{attrs:{label:"电话 :",prop:"mobile"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-phone"},model:{value:e.addUser.mobile,callback:function(t){e.$set(e.addUser,"mobile",t)},expression:"addUser.mobile"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancelAdd}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addButton(e.addUser)}}},[e._v("提 交")])],1)]),r("el-dialog",{attrs:{title:"用户编辑",visible:e.dialogVisibleEdit,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleEdit=t},close:e.editDialogClose}},[r("div",{staticClass:"adduserClass"},[r("el-form",{ref:"editUserForm",attrs:{model:e.editUser,"label-width":"80px",rules:e.addrules}},[r("el-form-item",{attrs:{label:"用户ID :",prop:"id"}},[r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-user",disabled:""},model:{value:e.editUser.id,callback:function(t){e.$set(e.editUser,"id",t)},expression:"editUser.id"}})],1),r("el-form-item",{attrs:{label:"电话 :",prop:"mobile"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-phone"},model:{value:e.editUser.mobile,callback:function(t){e.$set(e.editUser,"mobile",t)},expression:"editUser.mobile"}})],1),r("el-form-item",{attrs:{label:"邮箱 :",prop:"email"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-postcard"},model:{value:e.editUser.email,callback:function(t){e.$set(e.editUser,"email",t)},expression:"editUser.email"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancelEdit}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.getEdit}},[e._v("提交")])],1)]),r("el-dialog",{attrs:{title:"分配角色",visible:e.dialogVisibleRole,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleRole=t},close:e.cancelReset}},[r("div",{staticClass:"adduserClass"},[r("el-form",{ref:"rolesForm",attrs:{model:e.rolesForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名 :",prop:"username"}},[r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"66%"},attrs:{"prefix-icon":"el-icon-user",disabled:""},model:{value:e.rolesForm.username,callback:function(t){e.$set(e.rolesForm,"username",t)},expression:"rolesForm.username"}})],1),r("el-form-item",{attrs:{label:"当前角色:"}},[r("el-input",{staticStyle:{width:"66%"},attrs:{"prefix-icon":"el-icon-user",disabled:""},model:{value:e.rolename,callback:function(t){e.rolename=t},expression:"rolename"}})],1),r("el-form-item",{attrs:{label:"分配角色 :",prop:"rid"}},[r("el-select",{attrs:{placeholder:"请分配用户角色"},model:{value:e.rolesForm.rid,callback:function(t){e.$set(e.rolesForm,"rid",t)},expression:"rolesForm.rid"}},e._l(e.rolesList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisibleRole=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelRole}},[e._v("提交")])],1)])],1)},s=[],i=(r("99af"),r("96cf"),r("1da1")),n={data:function(){var e=function(e,t,r){var a=/^[A-Za-z0-9]+([_\.][A-Za-z0-9]+)*@([A-Za-z0-9\-]+\.)+[A-Za-z]{2,6}$/;if(a.test(t))return r();r(new Error("请输入正确的邮箱地址"))},t=function(e,t,r){var a=/^1(3|4|5|6|7|8|9)\d{9}$/;if(a.test(t))return r();r(new Error("请输入正确的手机号"))};return{usersInfo:{query:"",pagenum:1,pagesize:2},userList:[],total:0,dialogVisible:!1,dialogVisibleEdit:!1,dialogVisibleRole:!1,addUser:{username:"",password:"",email:"",mobile:""},editUser:{username:"",email:"",mobile:""},rolesForm:{username:"",rid:"",rname:""},userId:"",rolename:"",rolesList:[],addrules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:13,message:"长度在 6 到 13 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("users",{params:this.usersInfo});case 2:if(t=e.sent,r=t.data,200===r.meta.status){e.next=6;break}return e.abrupt("return","获取数据失败");case 6:this.userList=r.data.users,this.total=r.data.total;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.usersInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.usersInfo.pagenum=e,this.getUserList()},addDialogClose:function(){},editDialogClose:function(){},cancelEdit:function(){this.dialogVisibleEdit=!1,this.$refs.editUserForm.resetFields()},cancelAdd:function(){this.dialogVisible=!1,this.$refs.addUserForm.resetFields()},switchChange:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.put("users/".concat(t.id,"/state/").concat(t.mg_state));case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=7;break}return t.mg_state=!t.mg_state,e.abrupt("return",this.$message.error("用户状态更新失败"));case 7:this.$message.success("用户状态更新成功");case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},addButton:function(){var e=this;this.$refs.addUserForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=12;break}return e.dialogVisible=!1,t.next=4,e.$http.post("users",e.addUser);case 4:a=t.sent,s=a.data,e.$message.success(s.meta.msg),e.dialogVisible=!1,e.getUserList(),e.$refs.addUserForm.resetFields(),t.next=14;break;case 12:return e.$message.error("请正确填写资料"),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},userDelete:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("users/".concat(e.id));case 2:if(a=r.sent,s=a.data,200===s.meta.status){r.next=6;break}return r.abrupt("return",t.$message.error(s.meta.msg));case 6:t.$message.success(s.meta.msg),t.getUserList();case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},userEdit:function(e){this.dialogVisibleEdit=!0,this.editUser.id=e.id,this.editUser.email=e.email,this.editUser.mobile=e.mobile},getEdit:function(){var e=this;this.$refs.editUserForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=12;break}return e.dialogVisibleEdit=!1,t.next=4,e.$http.put("users/".concat(e.editUser.id),e.editUser);case 4:if(a=t.sent,s=a.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 8:e.$message.success(s.meta.msg),e.getUserList(),t.next=14;break;case 12:return e.$message.error("请正确填写资料"),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},cancelRoleDialog:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogVisibleRole=!0,this.rolesForm.username=t.username,e.next=4,this.$http.get("roles");case 4:r=e.sent,a=r.data,this.rolesList=a.data,this.userId=t.id,this.rolename=t.role_name;case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),cancelRole:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.put("users/".concat(this.userId,"/role"),{rid:this.rolesForm.rid});case 2:if(t=e.sent,r=t.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error(r.meta.msg));case 6:this.$message.success(r.meta.msg),this.dialogVisibleRole=!1,this.getUserList();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelReset:function(){this.$refs.rolesForm.resetFields()}},directives:{focus:{inserted:function(e){e.children[0].focus()}}}},o=n,l=(r("bb6c"),r("2877")),c=Object(l["a"])(o,a,s,!1,null,"f93f0072",null);t["default"]=c.exports},"9c30":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("角色列表")])],1),r("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"15px"}}},[r("el-row",{staticClass:"el-row",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入角色id",clearable:""},on:{clear:e.getRolesList},model:{value:e.rolesList.id,callback:function(t){e.$set(e.rolesList,"id",t)},expression:"rolesList.id"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getRolesList},slot:"append"})],1)],1),r("el-col",{attrs:{span:6}},[r("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加角色")])],1),r("el-col",{attrs:{span:12}})],1),r("el-dialog",{attrs:{title:"添加角色",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"rolesForm",attrs:{model:e.rolesForm,"label-width":"80px",rules:e.rolesRlues}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:e.rolesForm.roleName,callback:function(t){e.$set(e.rolesForm,"roleName",t)},expression:"rolesForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:e.rolesForm.roleDesc,callback:function(t){e.$set(e.rolesForm,"roleDesc",t)},expression:"rolesForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeAddDialog}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addRoles}},[e._v("提 交")])],1)],1),r("el-dialog",{attrs:{title:"编辑角色",visible:e.dialogVisible1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible1=t}}},[r("el-form",{ref:"editRolesForm",attrs:{model:e.editRolesForm,"label-width":"80px",rules:e.rolesRlues}},[r("el-form-item",{attrs:{label:"角色ID",prop:"roleName"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editRolesForm.id,callback:function(t){e.$set(e.editRolesForm,"id",t)},expression:"editRolesForm.id"}})],1),r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:e.editRolesForm.roleName,callback:function(t){e.$set(e.editRolesForm,"roleName",t)},expression:"editRolesForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:e.editRolesForm.roleDesc,callback:function(t){e.$set(e.editRolesForm,"roleDesc",t)},expression:"editRolesForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editRoles(e.editRolesForm.id)}}},[e._v("提 交")])],1)],1),r("el-dialog",{attrs:{title:"分配权限",visible:e.dialogVisible2,width:"50%"},on:{"update:visible":function(t){e.dialogVisible2=t},close:e.resetKey}},[r("el-tree",{ref:"tree",attrs:{data:e.dataTree,"show-checkbox":"","default-expand-all":"","node-key":"id","default-checked-keys":e.treeCheckedKey,"highlight-current":"",props:e.defaultProps}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.cancelPower()}}},[e._v("提 交")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolesList,border:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(a,s){return r("el-row",{key:a.id,class:["borderBottom",0==s?"borderTop":""],attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return e.removePower(t.row,a)}}},[e._v(e._s(a.authName))]),e._v(" "),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:18}},e._l(a.children,(function(a){return r("el-row",{key:a.id,class:["borderBottom",0==s?"borderTop":""]},[r("el-col",{attrs:{span:12}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return e.removePower(t.row,a)}}},[e._v(e._s(a.authName))]),e._v(" "),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:12}},e._l(a.children,(function(a){return r("el-row",{key:a.id},[r("el-col",{attrs:{span:24}},[r("el-tag",{attrs:{"disable-transitions":!1,closable:""},on:{close:function(r){return e.removePower(t.row,a)}}},[e._v(e._s(a.authName))])],1)],1)})),1)],1)})),1)],1)}))}}])}),r("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称",align:"center"}}),r("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述",align:"center"}}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.editDialog(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"success",icon:"el-icon-delete"},on:{click:function(r){return e.deleteRoles(t.row.id)}}},[e._v("删除")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-setting"},on:{click:function(r){return e.cancelPowerDialog(t.row)}}},[e._v("分配")])],1)]}}])})],1)],1)],1)},s=[];r("99af"),r("4160"),r("a15b"),r("159b");function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0");function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){return i(e)||n(e)||o()}r("96cf");var c=r("1da1"),u={data:function(){return{rolesList:[{id:"",roleName:"",roleDesc:""}],rolesForm:{roleName:"",roleDesc:""},rolesRlues:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}]},dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,editRolesForm:{id:"",roleName:"",roleDesc:""},dataTree:[],roleId:"",treeCheckedKey:[],defaultProps:{children:"children",label:"authName"}}},created:function(){this.getRolesList()},methods:{getRolesList:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("roles");case 2:t=e.sent,r=t.data,this.rolesList=r.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addRoles:function(){var e=this;this.$refs.rolesForm.validate(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=11;break}return e.dialogVisible=!1,t.next=4,e.$http.post("roles",e.rolesForm);case 4:a=t.sent,s=a.data,201!==s.meta.status&&e.$message.error(s.meta.msg),e.$message.success(s.meta.msg),e.getRolesList(),t.next=13;break;case 11:return e.$message.error("请规范填写"),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editDialog:function(e){this.dialogVisible1=!0,this.editRolesForm=e},editRoles:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.put("roles/".concat(t),this.editRolesForm);case 2:r=e.sent,a=r.data,200!==a.meta.status&&this.$message.error("编辑失败"),this.$message.success("编辑成功"),this.dialogVisible1=!1,this.getRolesList();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),closeAddDialog:function(){this.dialogVisible=!1,this.$refs.rolesForm.resetFields()},deleteRoles:function(e){var t=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("roles/".concat(e));case 2:a=r.sent,s=a.data,200!==s.meta.status&&t.$message.error("删除失败"),t.$message.success(s.meta.msg),t.getRolesList();case 7:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},removePower:function(e,t){var r=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.$http.delete("roles/".concat(e.id,"/rights/").concat(t.id));case 2:if(s=a.sent,i=s.data,200===i.meta.status){a.next=6;break}return a.abrupt("return",r.$message.error(i.meta.msg));case 6:r.$message.success(i.meta.msg),e.children=i.data;case 8:case"end":return a.stop()}}),a)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},cancelPowerDialog:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogVisible2=!0,e.next=3,this.$http.get("rights/tree");case 3:r=e.sent,a=r.data,this.dataTree=a.data,this.getPowerKey(t,this.treeCheckedKey),this.roleId=t.id;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),cancelPower:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[].concat(l(this.$refs.tree.getCheckedKeys()),l(this.$refs.tree.getHalfCheckedKeys())),r=t.join(","),e.next=4,this.$http.post("roles/".concat(this.roleId,"/rights"),{rids:r});case 4:if(a=e.sent,s=a.data,200===s.meta.status){e.next=8;break}return e.abrupt("return",this.$message.error(s.meta.msg));case 8:this.$message.success(s.meta.msg),this.dialogVisible2=!1,this.getRolesList();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPowerKey:function(e,t){var r=this;if(!e.children)return t.push(e.id);e.children.forEach((function(e){return r.getPowerKey(e,t)}))},resetKey:function(){this.treeCheckedKey=[]}}},d=u,f=(r("0702"),r("2877")),m=Object(f["a"])(d,a,s,!1,null,"6374f6ae",null);t["default"]=m.exports},a4d3:function(e,t,r){"use strict";var a=r("23e7"),s=r("da84"),i=r("d066"),n=r("c430"),o=r("83ab"),l=r("4930"),c=r("fdbf"),u=r("d039"),d=r("5135"),f=r("e8b5"),m=r("861d"),p=r("825a"),b=r("7b0b"),g=r("fc6a"),h=r("c04e"),v=r("5c6c"),w=r("7c73"),y=r("df75"),x=r("241c"),k=r("057f"),R=r("7418"),$=r("06cf"),_=r("9bf2"),F=r("d1e7"),S=r("9112"),U=r("6eeb"),C=r("5692"),O=r("f772"),V=r("d012"),L=r("90e3"),j=r("b622"),D=r("e538"),N=r("746f"),E=r("d44e"),P=r("69f3"),I=r("b727").forEach,A=O("hidden"),z="Symbol",T="prototype",K=j("toPrimitive"),B=P.set,q=P.getterFor(z),J=Object[T],Z=s.Symbol,H=i("JSON","stringify"),Q=$.f,W=_.f,G=k.f,M=F.f,X=C("symbols"),Y=C("op-symbols"),ee=C("string-to-symbol-registry"),te=C("symbol-to-string-registry"),re=C("wks"),ae=s.QObject,se=!ae||!ae[T]||!ae[T].findChild,ie=o&&u((function(){return 7!=w(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(e,t,r){var a=Q(J,t);a&&delete J[t],W(e,t,r),a&&e!==J&&W(J,t,a)}:W,ne=function(e,t){var r=X[e]=w(Z[T]);return B(r,{type:z,tag:e,description:t}),o||(r.description=t),r},oe=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Z},le=function(e,t,r){e===J&&le(Y,t,r),p(e);var a=h(t,!0);return p(r),d(X,a)?(r.enumerable?(d(e,A)&&e[A][a]&&(e[A][a]=!1),r=w(r,{enumerable:v(0,!1)})):(d(e,A)||W(e,A,v(1,{})),e[A][a]=!0),ie(e,a,r)):W(e,a,r)},ce=function(e,t){p(e);var r=g(t),a=y(r).concat(pe(r));return I(a,(function(t){o&&!de.call(r,t)||le(e,t,r[t])})),e},ue=function(e,t){return void 0===t?w(e):ce(w(e),t)},de=function(e){var t=h(e,!0),r=M.call(this,t);return!(this===J&&d(X,t)&&!d(Y,t))&&(!(r||!d(this,t)||!d(X,t)||d(this,A)&&this[A][t])||r)},fe=function(e,t){var r=g(e),a=h(t,!0);if(r!==J||!d(X,a)||d(Y,a)){var s=Q(r,a);return!s||!d(X,a)||d(r,A)&&r[A][a]||(s.enumerable=!0),s}},me=function(e){var t=G(g(e)),r=[];return I(t,(function(e){d(X,e)||d(V,e)||r.push(e)})),r},pe=function(e){var t=e===J,r=G(t?Y:g(e)),a=[];return I(r,(function(e){!d(X,e)||t&&!d(J,e)||a.push(X[e])})),a};if(l||(Z=function(){if(this instanceof Z)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),r=function(e){this===J&&r.call(Y,e),d(this,A)&&d(this[A],t)&&(this[A][t]=!1),ie(this,t,v(1,e))};return o&&se&&ie(J,t,{configurable:!0,set:r}),ne(t,e)},U(Z[T],"toString",(function(){return q(this).tag})),U(Z,"withoutSetter",(function(e){return ne(L(e),e)})),F.f=de,_.f=le,$.f=fe,x.f=k.f=me,R.f=pe,D.f=function(e){return ne(j(e),e)},o&&(W(Z[T],"description",{configurable:!0,get:function(){return q(this).description}}),n||U(J,"propertyIsEnumerable",de,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:Z}),I(y(re),(function(e){N(e)})),a({target:z,stat:!0,forced:!l},{for:function(e){var t=String(e);if(d(ee,t))return ee[t];var r=Z(t);return ee[t]=r,te[r]=t,r},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(d(te,e))return te[e]},useSetter:function(){se=!0},useSimple:function(){se=!1}}),a({target:"Object",stat:!0,forced:!l,sham:!o},{create:ue,defineProperty:le,defineProperties:ce,getOwnPropertyDescriptor:fe}),a({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:me,getOwnPropertySymbols:pe}),a({target:"Object",stat:!0,forced:u((function(){R.f(1)}))},{getOwnPropertySymbols:function(e){return R.f(b(e))}}),H){var be=!l||u((function(){var e=Z();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}));a({target:"JSON",stat:!0,forced:be},{stringify:function(e,t,r){var a,s=[e],i=1;while(arguments.length>i)s.push(arguments[i++]);if(a=t,(m(t)||void 0!==e)&&!oe(e))return f(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!oe(t))return t}),s[1]=t,H.apply(null,s)}})}Z[T][K]||S(Z[T],K,Z[T].valueOf),E(Z,z),V[A]=!0},a630:function(e,t,r){var a=r("23e7"),s=r("4df4"),i=r("1c7e"),n=!i((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:n},{from:s})},bb6c:function(e,t,r){"use strict";var a=r("7027"),s=r.n(a);s.a},d28b:function(e,t,r){var a=r("746f");a("iterator")},ddb0:function(e,t,r){var a=r("da84"),s=r("fdbc"),i=r("e260"),n=r("9112"),o=r("b622"),l=o("iterator"),c=o("toStringTag"),u=i.values;for(var d in s){var f=a[d],m=f&&f.prototype;if(m){if(m[l]!==u)try{n(m,l,u)}catch(b){m[l]=u}if(m[c]||n(m,c,d),s[d])for(var p in i)if(m[p]!==i[p])try{n(m,p,i[p])}catch(b){m[p]=i[p]}}}},e01a:function(e,t,r){"use strict";var a=r("23e7"),s=r("83ab"),i=r("da84"),n=r("5135"),o=r("861d"),l=r("9bf2").f,c=r("e893"),u=i.Symbol;if(s&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(f,u);var m=f.prototype=u.prototype;m.constructor=f;var p=m.toString,b="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=p.call(e);if(n(d,e))return"";var r=b?t.slice(7,-1):t.replace(g,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:f})}},e538:function(e,t,r){var a=r("b622");t.f=a},ec8c:function(e,t,r){"use strict";var a=r("4322"),s=r.n(a);s.a}}]);
//# sourceMappingURL=users_roles_rights.e37c4f3b.js.map